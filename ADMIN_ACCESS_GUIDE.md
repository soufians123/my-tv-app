# دليل الوصول للوحة الإدارة

## المشكلة المحلولة ✅
تم حل مشكلة "وصول غير مصرح" (Unauthorized Access) في لوحة الإدارة.

## المستخدمون الإداريون الحاليون

### 1. المستخدم الأول (محدث حديثاً)
- **ID**: `65e01a8f-99e2-4c8d-b86a-80637c1f3218`
- **الدور**: `admin`
- **الحالة**: ✅ نشط

### 2. مدير النظام
- **ID**: `f0205754-6eb8-421f-b3c5-29f793231add`
- **الاسم**: مدير النظام
- **الدور**: `admin`
- **الحالة**: ✅ نشط

## كيفية الوصول للوحة الإدارة

### الخطوة 1: تسجيل الدخول
1. اذهب إلى صفحة تسجيل الدخول: `/login`
2. سجل الدخول بحساب أحد المستخدمين الإداريين أعلاه
3. تأكد من نجاح تسجيل الدخول

### الخطوة 2: الوصول للوحة الإدارة
1. اذهب إلى: `/admin`
2. يجب أن تظهر لك لوحة الإدارة بدلاً من رسالة "وصول غير مصرح"

### الخطوة 3: التحقق من الصلاحيات
في لوحة الإدارة يمكنك:
- ✅ إدارة المستخدمين
- ✅ إدارة الألعاب
- ✅ عرض الإحصائيات
- ✅ إدارة التعليقات
- ✅ إدارة الإعلانات

## استكشاف الأخطاء

### إذا ظهرت رسالة "وصول غير مصرح" مرة أخرى:

1. **تحقق من تسجيل الدخول**:
   ```javascript
   // في Developer Console
   console.log(localStorage.getItem('supabase.auth.token'))
   ```

2. **تحقق من دور المستخدم**:
   - اذهب إلى `/profile` أو أي صفحة تعرض معلومات المستخدم
   - تأكد أن الدور هو `admin`

3. **مسح الكاش**:
   - امسح كاش المتصفح
   - سجل خروج ثم دخول مرة أخرى

4. **تحقق من قاعدة البيانات**:
   ```bash
   node scripts/check-database-setup.js
   ```

## إضافة مستخدمين إداريين جدد

لإضافة مستخدم إداري جديد:

1. **من لوحة الإدارة** (الطريقة المفضلة):
   - اذهب إلى `/admin/users`
   - ابحث عن المستخدم المطلوب
   - غير دوره إلى `admin`

2. **من قاعدة البيانات مباشرة**:
   - اذهب إلى [Supabase Dashboard](https://supabase.com/dashboard/project/jrtctjgdkvkdrjcbbbaz)
   - Table Editor > profiles
   - حدث عمود `role` للمستخدم المطلوب إلى `admin`

3. **باستخدام السكريبت**:
   ```bash
   node scripts/make-admin.js
   ```

## الملفات المتعلقة

- `components/AuthContext.js` - إدارة المصادقة والأدوار
- `pages/admin/AdminLayout.js` - تحقق من صلاحيات الإدارة
- `pages/admin/index.js` - الصفحة الرئيسية للوحة الإدارة
- `scripts/make-admin.js` - سكريبت تحديث الأدوار
- `scripts/check-database-setup.js` - فحص قاعدة البيانات

## روابط مهمة

- **لوحة الإدارة**: `/admin`
- **إدارة المستخدمين**: `/admin/users`
- **إدارة الألعاب**: `/admin/games`
- **Supabase Dashboard**: https://supabase.com/dashboard/project/jrtctjgdkvkdrjcbbbaz
- **الموقع المنشور**: https://zoooomiga-c12pflwhm-zomigas-projects.vercel.app

---

**ملاحظة**: تم حل المشكلة بنجاح وأصبح بإمكان المستخدمين الإداريين الوصول للوحة الإدارة دون مشاكل.