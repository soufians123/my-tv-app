# إعداد المستخدم الإداري - دليل الحلول

## المشكلة
لا يمكن تسجيل الدخول كمدير باستخدام البيانات: `admin@zomiga.com` / `Ab123456`

## السبب
المستخدم الإداري غير موجود في قاعدة بيانات Supabase الحقيقية.

## الحلول المتاحة

### الحل الأول: إنشاء المستخدم الإداري في Supabase (الأفضل)

1. **اذهب إلى Supabase Dashboard:**
   - افتح [supabase.com](https://supabase.com)
   - سجل الدخول إلى حسابك
   - اختر مشروعك

2. **افتح SQL Editor:**
   - انقر على "SQL Editor" في الشريط الجانبي
   - انقر على "New Query"

3. **اختر السكريبت المناسب:**
   
   **إذا كان هذا أول مرة تنشئ فيها المستخدم الإداري:**
   - استخدم ملف `database/create_admin_user.sql`
   - هذا السكريبت يتجنب التكرار تلقائياً
   
   **إذا كان المستخدم موجود بالفعل وتريد إعادة تعيينه:**
   - استخدم ملف `database/reset_admin_user.sql`
   - هذا السكريبت يحذف المستخدم الموجود ويعيد إنشاءه

4. **تشغيل السكريبت:**
   - انسخ محتوى الملف المختار
   - الصق المحتوى في محرر SQL
   - انقر على "Run" لتنفيذ السكريبت

5. **التحقق من النجاح:**
   - اذهب إلى "Authentication" > "Users"
   - يجب أن ترى المستخدم `admin@zomiga.com`

### الحل الثاني: استخدام النظام التجريبي (مؤقت)

إذا كنت تريد اختبار النظام بسرعة:

1. **تعديل إعدادات البيئة:**
   ```bash
   # في ملف .env.local، قم بتعليق أو حذف هذه الأسطر مؤقتاً:
   # NEXT_PUBLIC_SUPABASE_URL=https://jrtctjgdkvkdrjcbbbaz.supabase.co
   # NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```

2. **إعادة تشغيل الخادم:**
   ```bash
   npm run dev
   ```

3. **تسجيل الدخول:**
   - البريد الإلكتروني: `admin@zomiga.com`
   - كلمة المرور: `Ab123456`

### الحل الثالث: إنشاء حساب جديد

1. **اذهب إلى صفحة التسجيل:**
   - افتح `http://localhost:3000/auth/register`

2. **أنشئ حساب جديد:**
   - استخدم أي بريد إلكتروني
   - اختر كلمة مرور قوية

3. **تحديث الصلاحيات يدوياً:**
   - في Supabase Dashboard > Authentication > Users
   - ابحث عن المستخدم الجديد
   - حدث `raw_user_meta_data` ليشمل `{"role": "admin"}`

## التحقق من نجاح الحل

1. **تسجيل الدخول:**
   - اذهب إلى `http://localhost:3000/auth/login`
   - أدخل بيانات المدير
   - يجب أن تنتقل إلى الصفحة الرئيسية

2. **الوصول للوحة الإدارة:**
   - اذهب إلى `http://localhost:3000/admin`
   - يجب أن ترى جميع أدوات الإدارة

## ملاحظات مهمة

- **الحل الأول** هو الأفضل للاستخدام الإنتاجي
- **الحل الثاني** مناسب للاختبار السريع فقط
- **الحل الثالث** مناسب إذا كنت تريد استخدام بريد إلكتروني مختلف

## في حالة استمرار المشكلة

1. تأكد من أن جميع جداول قاعدة البيانات موجودة
2. تحقق من أن متغيرات البيئة صحيحة
3. تأكد من أن Supabase يعمل بشكل صحيح
4. راجع رسائل الأخطاء في وحدة التحكم

---

**تم إنشاء هذا الدليل لحل مشكلة تسجيل الدخول كمدير في تطبيق Zomiga**